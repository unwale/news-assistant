# Новостной AI-ассистент на основе большой языковой модели

Этот проект представляет собой прототип новостного AI-ассистента, разработанного для Санкт-Петербургского государственного университета (СПбГУ). Система позволяет пользователям в режиме диалога получать актуальную информацию о новостях и событиях университета, используя голосовые или текстовые запросы через Telegram-бот.

В основе решения лежит архитектура **Retrieval-Augmented Generation (RAG)**, которая обогащает запросы пользователя релевантной информацией из базы знаний перед генерацией ответа большой языковой моделью.

## Ключевые возможности

- **Взаимодействие через Telegram-бот**: Удобный и привычный интерфейс.
- **Поддержка голосового и текстового ввода**: Общайтесь с ботом так, как вам удобно.
- **Генерация кратких ответов**: Система предоставляет сжатые и осмысленные ответы вместо списка ссылок.
- **Анализ временных запросов**: Понимание запросов вроде «новости за прошлую неделю» или «что было в мае?».

## Архитектура и стек технологий

Проект построен на основе микросервисной архитектуры и управляется с помощью `Docker Compose`.

### Основные сервисы:
- `frontend/telegram-bot`: Frontend-сервис, отвечающий за взаимодействие с пользователем в Telegram.
- `backend/app`: Ядро системы, оркестрирующее RAG-пайплайн (обработка запроса, поиск, генерация ответа).
- `backend/parser`: Сервис для сбора и предобработки новостей из источников (сайты, Telegram, VK).
- `backend/embedder`: Сервис для векторизации текстов с помощью модели эмбеддингов.
- `backend/stt`: Сервис для распознавания речи (Speech-to-Text).
- `weaviate`: Векторная база данных для хранения и поиска новостных чанков.

### Технологический стек:
- **Backend**: Python, Docker, Docker Compose
- **AI/ML**:
  - **LLM**: GigaChat
  - **Vector DB**: Weaviate
  - **Embeddings**: `sergeyzh/BERTA`
  - **Speech-to-Text (STT)**: GigaAM
  - **Text-to-Speech (TTS)**: Salute Speech
- **Frontend**: `python-telegram-bot`
- **Парсинг данных**: `Telethon`, `vk_api`, `BeautifulSoup4`

## Установка и запуск

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/unwale/news-assistant
   cd news-assistant
   ```

2. **Настройте переменные окружения:**
   Скопируйте файл `frontend/telegram-bot/example.env` в `.env` в корне проекта и заполните необходимые API-ключи и учетные данные.
   ```bash
   cp frontend/telegram-bot/example.env .env
   ```
   Вам потребуются токены для:
   - `TELEGRAM_BOT_TOKEN`
   - `GIGACHAT_CREDENTIALS`
   - `SALUTE_SPEECH_CLIENT_ID` и `SALUTE_SPEECH_CLIENT_SECRET`

3. **Подготовка данных:**
   Создайте директорию `data` в корне проекта. Поместите в нее файл с новостями в формате JSONL (например, `news_all.jsonl`). Этот файл будет использоваться для первоначального наполнения базы данных.

4. **Запустите проект с помощью Docker Compose:**
   Эта команда соберет образы и запустит все необходимые контейнеры в фоновом режиме.
   ```bash
   docker-compose up -d --build
   ```
   При первом запуске сервис `init` автоматически наполнит векторную базу `Weaviate` новостями из директории `data/`.

5. **Начните общение с ботом** в Telegram.

## Структура проекта

```
.
├── backend/            # Микросервисы бэкенда (app, parser, stt, embedder)
├── frontend/           # Сервис Telegram-бота
├── certificates/       # SSL-сертификат для работы Salute Speech
├── models/             # Локально хранимые модели (GigaAM)
├── test/               # Скрипты для оценки качества (Retrieval, Generation)
├── docker-compose.yml  # Файл для оркестрации сервисов
```